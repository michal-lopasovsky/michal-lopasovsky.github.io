<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">

  <title>
    
    Michal Lopasovsky | Technical Artist
  </title>

  <!-- Load Javascript and CSS for Semantic UI -->
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
  <script src="/css/semantic-ui/semantic.min.js"></script>
  <link rel="stylesheet" href="/css/semantic-ui/semantic.min.css">

  <!-- Load Techfolio CSS customizations -->
  <link rel="stylesheet" type="text/css" href="/css/stylesheet-default.css">
  <link rel="stylesheet" type="text/css" href="/css/stylesheet-customizations.css">

  <link rel="stylesheet" type="text/css" href="/css/print-default.css" media="print">
  <link rel="stylesheet" type="text/css" href="/css/print-customizations.css" media="print">

  <!-- Load a rouge theme from the sample themes in css/rouge.
       See https://benhur07b.github.io/2017/03/25/add-syntax-highlighting-to-your-jekyll-site-with-rouge.html
  -->
  <link rel="stylesheet" type="text/css" href="/css/rouge/.css">

  <!-- Load MathJax if 'mathjax: true' is found in your _config.yml. -->
  
  <script type="text/javascript"
          src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


</head>


  <body>
    <!-- Used by all builtin themes. Now we list number of essays and projects. -->

<!--  -->

<!--  -->


<div class="nonprintable">
  <nav class="ui stackable menu">
    <a href="/" class="brand item">
      <img class="ui avatar image" src="../images/giphy.gif"><span>Michal Lopasovsky</span>
    </a>
    <!--  -->
    <a href="/bio" class="  item">Resume</a>
    
    <a href="/projects" class="  active item">Portfolio <!-- (6)--></a>
    
  </nav>
</div>

<div style="margin-top: 20px; margin-bottom: 20px" class="ui text container">
 <h1></h1>
 <div class="ui embed" data-source="vimeo" data-id="714029715"></div>

<h2 id="fbx-exporter">FBX EXPORTER</h2>

<h3 id="about-the-project">About the project</h3>
<p>I made this addon to have a better control over mesh data exported from Blender to Unity3D. Additionally it improved speed of iterations.</p>
<p>Initially script had no UI elements. But I offered my script to my friend and to make his life easier I decided to update it and make UI for it.</p>
<p>Addon handles export of all meshes which are linked under an <em>export_node</em> (helper object). One <em>export_node</em> creates a one <em>FBX</em> file.<br /><br />
Other features were added such as custom properties which are processed by Unity3Dâ€™s <em>AssetProcessor</em> while meshes are imported. Required fields such as name of the FBX file and export path are saved within the .blender file as meta data.
Additionally I added preprocessor script which is responsible for adding collider components on individual meshes in Unity3D and converting individual meshes to Unity Collider objects [BoxCollider, CyllinderCollider, etc.].</p>

<hr />

<h3 id="base-functionality">Base functionality</h3>

<p><ins>Functionality is quite simple:</ins> Link all meshes you want to export as a one object under <em>export_node</em>. You can do it either in 3d viewport or in <em>Scene Collection</em> panel. Fill up name for export node (which will translate as name of your FBX file), pick export path and hit export button.</p>

<div class="ui left large floated rounded image">
  <img class="ui image" src="/images/exporter_images_tool_zoom.jpg" />
</div>

<p><em>Name:</em> Name of FBX file<br />
<em>Path:</em> Where FBX file is going to be saved<br />
<em>isStatic:</em> Custom property<br />
<em>Export to FBX:</em> Button that exports meshes linked under this export node<br />
<em>Create a new export node:</em> When a mesh is selected in 3D viewport or in Scene Collection panel and button is pressed, it creates a new empty export node (helper object) in a position of your selection.</p>

<p><ins>Colliders:</ins> If user wants to export also collider objects together with the mesh they can do so by naming collider meshes with specified suffixes: <em>boxcollider, capsulecollider, spherecollider, _coll(static mesh)</em>.</p>

<p><ins>Flags:</ins> Additionally you can set <em>isStatic</em> boolean. This boolean sets a custom property to all objects under your <em>export_node</em> to <em>static</em>. When your object is imported to Unity3D this custom property is read and all objects within are flagged by Unity3D editor as <em>Static</em>.</p>

<p>Static flag in Unity3D editor:
BatchingStatic, ContributeGI, ContributeGI, OccludeeStatic, OccluderStatic, ReflectionProbeStatic</p>

<p>Although FBX exporter is not responsible for seting any in-editor flags. <code class="language-plaintext highlighter-rouge">AssetPostprocessor.cs</code> is responsible for it:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">private</span> <span class="k">void</span> <span class="nf">OnPostprocessGameObjectWithUserProperties</span><span class="p">(</span><span class="n">GameObject</span> <span class="n">go</span><span class="p">,</span> <span class="kt">string</span><span class="p">[]</span> <span class="n">propNames</span><span class="p">,</span> <span class="n">System</span><span class="p">.</span><span class="n">Object</span><span class="p">[]</span> <span class="n">values</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">string</span> <span class="n">metaKeyStatic</span> <span class="p">=</span> <span class="s">"isStatic"</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">propNames</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="n">String</span><span class="p">.</span><span class="nf">Equals</span><span class="p">(</span><span class="n">propNames</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">metaKeyStatic</span><span class="p">)</span> <span class="p">&amp;&amp;</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">values</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">==</span> <span class="m">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">GameObjectUtility</span><span class="p">.</span><span class="nf">SetStaticEditorFlags</span><span class="p">(</span><span class="n">go</span><span class="p">,</span> <span class="n">flags</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<hr />

<p>Link to repository: <a href="https://github.com/michal-lopasovsky/Unity3d-juniper/tree/main/fbx_exporter">GitHub Link</a>.</p>

<hr />

</div>


    <!-- Always create iframes to embed videos if present. See: http://semantic-ui.com/modules/embed.html -->

<script>
  $('.ui.embed').embed();
</script>


  </body>

</html>
